(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{597:function(s,t,a){"use strict";a.r(t);var e=a(5),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",[s._v("webpack配置知识")]),s._v(" "),a("hr"),s._v(" "),a("ul",[a("li",[a("u",[s._v("已完结")])])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/qq_44287165/article/details/120269320?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164933415416780264044626%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=164933415416780264044626&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-3-120269320.142%5Ev7%5Epc_search_result_cache,157%5Ev4%5Econtrol&utm_term=webpack%E9%BB%91%E9%A9%AC&spm=1018.2226.3001.4187",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考博客"),a("OutboundLink")],1)]),s._v(" "),a("blockquote",[a("p",[s._v("我是把它的代码格式和文档处理了一下")])]),s._v(" "),a("h3",[s._v("1. 什么是webpack？")]),s._v(" "),a("p",[s._v("概念：webpack 是前端项目工程化的具体解决方案。"),a("br")]),s._v(" "),a("p",[s._v("主要功能：它提供了友好的前端模块化开发支持，以及代码压缩混淆、处理浏览器端 JavaScript 的兼容性、性能优化等强大的功能。"),a("br")]),s._v(" "),a("p",[a("strong",[s._v("好处")]),s._v("：让程序员把工作的重心放到具体功能的实现上，提高了前端开发效率和项目的可维护性。"),a("br"),s._v(" "),a("strong",[s._v("注意")]),s._v("：目前 Vue，React 等前端项目，基本上都是基于 webpack 进行工程化开发的")]),s._v(" "),a("h3",[s._v("2. 在项目中安装webpack")]),s._v(" "),a("p",[s._v("在终端运行如下的命令，安装 webpack 相关的两个包"),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm install webpack@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.42")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(" webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.7")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n")])])]),a("p",[s._v("ps: -D的意义是将webpack文件安装在开发版本中，也就是devDependencies 仅在开发环境下使用。"),a("br")]),s._v(" "),a("p",[a("strong",[s._v("扩展：")]),a("br")]),s._v(" "),a("p",[s._v("npm安装时-S -D分别的意思 -S 即--save（保存）\n包名会被注册在package.json的dependencies里面，在生产环境下这个包的依赖依然存在 -D 即--dev（开发） 包名会被注册在package.json的devDependencies里面，仅在开发环境下存在的包用-D，如babel，sass-loader这些解析器"),a("br")]),s._v(" "),a("p",[a("strong",[s._v("注意")]),s._v("：在使用npm install一个插件的时候，需要添加上-s或-d，不然不会再package.json中显示。")]),s._v(" "),a("h3",[s._v("3. "),a("strong",[s._v("在项目中配置webpack")])]),s._v(" "),a("p",[s._v("①在项目根目录中，创建名为 webpack.config.js 的 webpack 配置文件，并初始化如下的基本配置："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// mode用来指定构建模式。可选值有development 和 production")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("②在 package.json 的 scripts 节点下，新增 dev 脚本如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("“script”："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("“dev”")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// script 节点下的脚本，可以通过 npm run dev执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("③在终端中运行 npm run dev 命令，启动 webpack 进行项目的打包构建"),a("br")]),s._v(" "),a("p",[a("strong",[s._v("mode的🉑️选值")]),a("br"),s._v("\n(1)development"),a("br"),s._v("\n⚫开发环境"),a("br"),s._v("\n⚫不会对打包生成的文件进行代码压缩和性能优化"),a("br"),s._v("\n⚫打包速度快，适合在开发阶段使用"),a("br"),s._v("\n(2)production"),a("br"),s._v("\n⚫ 生产环境"),a("br"),s._v("\n⚫ 会对打包生成的文件进行代码压缩和性能优化"),a("br"),s._v("\n⚫ 打包速度很慢，仅适合在项目发布阶段使用"),a("br")]),s._v(" "),a("h3",[s._v("4. webpack.config.js 文件的作用")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("webpack.config.js 是 webpack 的配置文件。webpack 在真正开始打包构建之前，会先读取这个配置文件， 从而基于给定的配置，对项目进行打包。"),a("br")])]),s._v(" "),a("li",[a("p",[s._v("注意：由于 webpack 是基于 node.js 开发出来的打包工具，因此在它的配置文件中，支持使用 node.js 相关 的语法和模块进行 webpack 的个性化配置"),a("br")])])]),s._v(" "),a("h3",[s._v("5.webpack 中的默认约定")]),s._v(" "),a("p",[s._v("在 webpack 4.x 和 5.x 的版本中，有如下的默认约定："),a("br"),s._v("\n① 默认的打包入口文件为 src -> index.js"),a("br"),s._v("\n② 默认的输出文件路径为 dist -> main.js"),a("br"),s._v("\n注意：可以在 webpack.config.js 中修改打包的默认约定"),a("br")]),s._v(" "),a("h3",[s._v("6.自定义打包的入口与出口")]),s._v(" "),a("p",[s._v("在 webpack.config.js 配置文件中，通过 entry 节点指定打包的入口。通过\noutput 节点指定打包的出口。"),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./scr/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//打包入口文件路径")]),s._v("\n    output："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        path：path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 输出文件的存放路径")]),s._v("\n        filename：‘bundle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js’ "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出文件的名称")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"webpack-中的插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-中的插件"}},[s._v("#")]),s._v(" webpack 中的插件")]),s._v(" "),a("h3",[s._v("1. webpack 插件的作用")]),s._v(" "),a("p",[s._v("通过安装和配置第三方的插件，可以拓展 webpack 的能力，从而让 webpack 用起来更方便。最常用的 webpack 插件有如下两个："),a("br")]),s._v(" "),a("p",[s._v("① webpack-dev-server"),a("br"),s._v("\n⚫ 类似于 node.js 阶段用到的 nodemon 工具"),a("br"),s._v("\n⚫ 每当修改了源代码，webpack 会自动进行项目的打包和构建"),a("br")]),s._v(" "),a("p",[s._v("② html-webpack-plugin"),a("br"),s._v("\n⚫ webpack 中的 HTML 插件（类似于一个模板引擎插件）"),a("br"),s._v("\n⚫ 可以通过此插件自定制 index.html 页面的内容"),a("br")]),s._v(" "),a("h3",[s._v("2. webpack-dev-server")]),s._v(" "),a("p",[s._v("webpack-dev-server 可以让 webpack 监听项目源代码的变化，从而进行自动打包构建。"),a("br")]),s._v(" "),a("p",[s._v("2.1安装 webpack-dev-server"),a("br")]),s._v(" "),a("p",[s._v("运行如下的命令，即可在项目中安装此插件："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm install webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.11")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n")])])]),a("p",[s._v("2.2配置 webpack-dev-server"),a("br")]),s._v(" "),a("p",[s._v("① 修改 package.json -> scripts 中的 dev 命令如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("“script”："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("“dev”")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack server"')]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// script 节点下的脚本，可以通过 npm run dev执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("② 再次运行 npm run dev 命令，重新进行项目的打包"),a("br"),s._v("\n③ 在浏览器中访问 http://localhost:8080 地址，查看自动打包效果"),a("br")]),s._v(" "),a("p",[a("strong",[s._v("注意")]),s._v("：webpack-dev-server 会启动一个实时打包的 http 服务器"),a("br")]),s._v(" "),a("p",[s._v("2.3 打包生成的文件哪儿去了？"),a("br")]),s._v(" "),a("p",[s._v("① 不配置 webpack-dev-server 的情况下，webpack 打包生成的文件，会存放到实际的物理磁盘上"),a("br")]),s._v(" "),a("p",[s._v("⚫ 严格遵守开发者在 webpack.config.js 中指定配置"),a("br"),s._v("\n⚫ 根据 output 节点指定路径进行存放"),a("br")]),s._v(" "),a("p",[s._v("② 配置了 webpack-dev-server 之后，打包生成的文件存放到了内存中"),a("br")]),s._v(" "),a("p",[s._v("⚫ 不再根据 output 节点指定的路径，存放到实际的物理磁盘上 "),a("br"),s._v("\n⚫ 提高了实时打包输出的性能，因为内存比物理磁盘速度快很多"),a("br")]),s._v(" "),a("p",[s._v("2.4 生成到内存中的文件该如何访问？"),a("br")]),s._v(" "),a("p",[s._v("webpack-dev-server 生成到内存中的文件，默认放到了项目的根目录中，而且是虚拟的、不可见的。"),a("br")]),s._v(" "),a("p",[s._v("⚫ 可以直接用 / 表示项目根目录，后面跟上要访问的文件名称，即可访问内存中的文件"),a("br"),s._v("\n⚫ 例如 /bundle.js 就表示要访问 webpack-dev-server 生成到内存中的 bundle.js 文件"),a("br")]),s._v(" "),a("h3",[s._v("3. html-webpack-plugin")]),s._v(" "),a("p",[s._v("html-webpack-plugin 是 webpack 中的 HTML 插件，可以通过此插件自定制 index.html 页面的内容。"),a("br")]),s._v(" "),a("p",[a("strong",[s._v("需求")]),s._v("：通过 html-webpack-plugin 插件，将 src 目录下的 index.html 首页，复制到项目根目录中一份！"),a("br")]),s._v(" "),a("p",[s._v("3.1 安装 html-webpack-plugin"),a("br")]),s._v(" "),a("p",[s._v("运行如下的命令，即可在项目中安装此插件："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm install html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("plugin@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.3")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n")])])]),a("p",[s._v("3.2 配置 html-webpack-plugin"),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//1，导入HTML 插件，得到一个构造函数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" HtmlPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' html-webpack-plugin '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2,创建 HTML 插件的实例对象")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" htmlPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("template")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定原文件的存放路径")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 指定生成的文件的存放路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("htmlPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3.通过plugins节点，使HTMLPlugin插件生效")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("3.3 解惑 html-webpack-plugin"),a("br")]),s._v(" "),a("p",[s._v("① 通过 HTML 插件复制到项目根目录中的 index.html 页面，也被放到了内存中"),a("br"),s._v("\n② HTML 插件在生成的 index.html 页面，自动注入了打包的 bundle.js 文件"),a("br")]),s._v(" "),a("h3",[s._v("4. devServer 节点")]),s._v("\n在 webpack.config.js 配置文件中，可以通过 devServer 节点对 \nwebpack-dev-server 插件进行更多的配置， "),a("br"),s._v(" "),a("p",[s._v("示例代码如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("devServer："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("open")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//初次打包完成后，自动打开浏览器")]),s._v("\n    host：‘ "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(" ’ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//实时打包所使用的主机地址")]),s._v("\n    port："),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("，\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//实施打包所使用的端口号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[a("strong",[s._v("注意")]),s._v("：凡是修改了 webpack.config.js 配置文件，或修改了 package.json 配置文件，必须重启实时打包的服 务器，否则最新的配置文件无法生效！"),a("br")]),s._v(" "),a("h2",{attrs:{id:"webpack中的loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack中的loader"}},[s._v("#")]),s._v(" webpack中的loader")]),s._v(" "),a("h3",[s._v("1. loader 概述")]),s._v(" "),a("p",[s._v("在实际开发过程中，webpack 默认只能打包处理以 .js 后缀名结尾的模块。"),a("br"),s._v('\n其他非 ".js" 后缀名结尾的模块， webpack 默认处理不了，需要调用 loader 加载器才可以正常打包，否则会报错！'),a("br")]),s._v(" "),a("p",[s._v("loader 加载器的作用：协助 webpack 打包处理特定的文件模块。比如："),a("br")]),s._v(" "),a("p",[s._v("⚫ css-loader 可以打包处理 .css 相关的文件"),a("br"),s._v("\n⚫ less-loader 可以打包处理 .less 相关的文件"),a("br"),s._v("\n⚫ babel-loader 可以打包处理 webpack 无法处理的高级 JS 语法"),a("br")]),s._v(" "),a("h3",[s._v("2. loader的调用过程")]),s._v(" "),a("p",[s._v("第一步，判断这个要处理的文件是不是js文件，然后就去配置文件中，查找有没有对应的第三方loader规则。第二步，如果找到了对应的规则，就会调用对应的loader 处理这种文件。"),a("br")]),s._v(" "),a("p",[s._v("第三步，在调用loader的时候，是从后往前调用的。"),a("br")]),s._v(" "),a("p",[s._v("最后，当最后一个loader调用完毕，会把处理的结果，直接交给webpack进行打包合并，并最终输出到bundle.js 中去。"),a("br")]),s._v(" "),a("p",[s._v("也就是："),a("br")]),s._v(" "),a("p",[s._v("1，webpack只能打包.js结尾的文件，处理不了其他后缀的文件。"),a("br")]),s._v(" "),a("p",[s._v("2，由于代码中包含了index.css这个文件，所以webpack处理不了"),a("br")]),s._v(" "),a("p",[s._v("3，当webpack发现某个文件处理不了的时候，会查找webpack.config.js这个配置文件，看module.rules数组中，是否配置了对应的loader加载器。"),a("br")]),s._v(" "),a("p",[s._v("4，webpack把index.css这个文件，先转交给最后一个loader进行处理（先转交给css-loader）。"),a("br")]),s._v(" "),a("p",[s._v("5，当css-loader处理完毕之后，会把处理的结果转交给下一个loader（转交给style-loader）。"),a("br")]),s._v(" "),a("p",[s._v("6，当style-loader处理完毕后发现没有下一个loader了，于是就把处理的结果转交给了webpack。"),a("br")]),s._v(" "),a("p",[s._v("7，webpack把style-loader处理的结果，合并到/dist/bundle.js中，最终生成打包好的文件。"),a("br")]),s._v(" "),a("p",[s._v("3，打包处理css文件"),a("br")]),s._v(" "),a("p",[s._v("① 运行 npm i style-loader@3.0.0 css-loader@5.2.6 -D 命令，安装处理 css 文件的 loader"),a("br"),s._v("\n② 在 webpack.config.js 的 module -> rules 数组中，添加 loader 规则如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-cs extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cs"}},[a("code",[s._v("module："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所有第三方文件模块的匹配规则")]),s._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文件后缀名的匹配规则")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" test："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("css$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token named-parameter punctuation"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("'style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader"),a("span",{pre:!0,attrs:{class:"token char"}},[s._v("','")]),s._v(" css"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader '"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("其中，test表示匹配的文件类型，use表示对应要调用的loader"),a("br")]),s._v(" "),a("p",[a("strong",[s._v("注意：")]),a("br")]),s._v(" "),a("p",[s._v("⚫ use 数组中指定的 loader 顺序是固定的"),a("br"),s._v("\n⚫ 多个 loader 的调用顺序是：从后往前调用"),a("br")]),s._v(" "),a("h3",[s._v("4. 打包处理 less 文件")]),s._v("\n① 运行 npm i less-loader@10.0.1 less@4.1.1 -D 命令"),a("br"),s._v(" "),a("p",[s._v("② 在 webpack.config.js 的 module -> rules 数组中，添加 loader 规则如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文件后缀名的匹配规则")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" test："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("css$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' css-loader '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' less-loader '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",[s._v("5. 打包处理样式表中与url路径相关的文件")]),s._v(" "),a("p",[s._v("① 运行 npm i url-loader@4.1.1 file-loader@6.2.0 -D 命令"),a("br"),s._v("\n② 在 webpack.config.js 的 module -> rules 数组中，添加 loader 规则如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所有第三方文件模块的匹配规则")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文件后缀名的匹配规则")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//超过了limit的话就不转换成base64")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.jpg|png|gif$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' url-loader?limit=22229 '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v('其中" ？"之后的是loader的参数项'),a("br")]),s._v(" "),a("p",[s._v("⚫ limit 用来指定图片的大小，单位是字节（byte）"),a("br"),s._v("\n⚫ 只有 ≤ limit 大小的图片，才会被转为 base64 格式的图片"),a("br")]),s._v(" "),a("h3",[s._v("6. 打包处理 js 文件中的高级语法")]),s._v(" "),a("p",[s._v("webpack只能打包处理一部分高级的JavaScript语法。"),a("br")]),s._v(" "),a("p",[s._v("对于那些webpack无法处理的高级js语言，需要借助于babel-loader进行打包处理。"),a("br")]),s._v(" "),a("p",[s._v("安装babel-loader相关的包"),a("br")]),s._v(" "),a("p",[s._v("运行如下的命令安装对应的依赖包："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm i babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.2")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v(" @babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("core@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.14")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".6")]),s._v(" @babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("proposal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("decorators@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.14")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n")])])]),a("p",[s._v("在 webpack.config.js 的 module -> rules 数组中，添加 loader 规则如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注意：必须使用 exclude 指定排除项；")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//因为 node_modules 目录下的第三方包不需要被打包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v(".js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' babel-loader '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("exclude")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v(" node_modules")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("配置babel-loader"),a("br")]),s._v(" "),a("p",[s._v("在项目根目录下，创建名为babel.config.js 的配置文件，定义babel 的配置项如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' @babel/plugin-proposal-decorators '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("legacy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",[s._v("打包发布")]),s._v(" "),a("h3",[s._v("1. 为什么要打包发布")]),s._v(" "),a("p",[s._v("项目开发完成之后，需要使用 webpack 对项目进行打包发布，主要原因有以下两点："),a("br")]),s._v(" "),a("p",[s._v("① 开发环境下，打包生成的文件存放于内存中，无法获取到最终打包生成的文件"),a("br"),s._v("\n② 开发环境下，打包生成的文件不会进行代码压缩和性能优化"),a("br")]),s._v(" "),a("p",[s._v("为了让项目能够在生产环境中高性能的运行，因此需要对项目进行打包发布。"),a("br")]),s._v(" "),a("h3",[s._v("2. 配置 webpack 的打包发布")]),s._v(" "),a("p",[s._v("在 package.json 文件的 scripts 节点下，新增 build 命令如下："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('" scripts "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('" div "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" webpack server "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//开发环境中，运行 dev命令")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('" build "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" webpack --mode production "')]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 项目发布时，运行 build 命令。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("--mode是一个参数项，用来指定webpack 的运行模式。production代表生产环境，会对打包生成的文件进行代码压缩和性能优化。"),a("br")]),s._v(" "),a("p",[a("strong",[s._v("注意：")]),a("br"),s._v("\n通过 --mode 指定的参数项，会覆盖 webpack.config.js 中的 model选项。"),a("br")]),s._v(" "),a("h3",[s._v("3. 把 JavaScript 文件统一生成到 js 目录中")]),s._v(" "),a("p",[s._v("在webpack.config.js 配件文件的output 节点中，进行如下配置："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' dist '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//明确告诉 webpack 把生成的 bundle.js 文件")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//存放到 dist 目录下的 js 子目录中")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' js/bundle.js'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",[s._v("4. 把图片文件统一生成到 image 目录中")]),s._v(" "),a("p",[s._v("修改 webpack.config.js 中的 url-loader 配置项，"),a("br")]),s._v(" "),a("p",[s._v("新增 outputPath 选项即可指定图片文件的输出路径:"),a("br")]),s._v(" "),a("div",{staticClass:"language-cs extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cs"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\ntest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jpg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("png"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("gif$"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token named-parameter punctuation"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ' url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader '"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token named-parameter punctuation"}},[s._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        limit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22228")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 明确指定把打包生成的图片文件，存储到dist 目录下的 image 文件夹中。")]),s._v("\n        outputPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("' image '"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",[s._v("5. 自动清理 dist 目录下的旧文件")]),s._v(" "),a("p",[s._v("为了在每次打包发布时自动清理掉 dist 目录中的旧文件，可以安装并配置 clean-webpack-plugin插件 ："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1，安装清理dist 目录的webpack 插件")]),s._v("\nnpm install clean"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("plugin@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2,按需导入插件，得到插件的构造函数之后，创建插件的实例对象")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" CleanWebpackPlugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' clean-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" cleanPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CleanWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3，把创建的 cleanPlugin 插件实例对象，挂载到 plugins节点中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" htmlPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("cleanPlugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//挂载插件")]),s._v("\n")])])]),a("h2",{attrs:{id:"source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#source-map"}},[s._v("#")]),s._v(" Source Map")]),s._v(" "),a("h3",[s._v("1. 生产环境遇到的问题")]),s._v(" "),a("p",[s._v("前端项目在投入生产环境之前，都需要对 JavaScript 源代码进行压缩混淆，从而减小文件的体积，提高文件的 加载效率。此时就不可避免的产生了另一个问题："),a("br")]),s._v(" "),a("p",[s._v("对压缩混淆之后的代码除错（debug）是一件极其困难的事情"),a("br")]),s._v(" "),a("p",[s._v("⚫ 变量被替换成没有任何语义的名称"),a("br"),s._v("\n⚫ 空行和注释被剔除"),a("br")]),s._v(" "),a("h3",[s._v("2. 什么是Source Map")]),s._v(" "),a("p",[s._v("Source Map 就是一个信息文件，里面储存着位置信息。也就是说，Source Map 文件中存储着压缩混淆后的 代码，所对应的转换前的位置。"),a("br")]),s._v(" "),a("p",[s._v("有了它，出错的时候，除错工具将直接显示原始代码，而不是转换后的代码，能够极大的方便后期的调试。"),a("br")]),s._v(" "),a("h3",[s._v("3. webpack 开发环境下的 Source Map")]),s._v(" "),a("p",[s._v("在开发环境下，webpack 默认启用了 Source Map 功能。当程序运行出错时，可以直接在控制台提示错误行 的位置，并定位到具体的源代码："),a("br")]),s._v(" "),a("p",[s._v("即出错后报错会提示具体源代码的位置： index.js : 20"),a("br")]),s._v(" "),a("p",[s._v("3.1默认 Source Map 的问题"),a("br")]),s._v(" "),a("p",[s._v("开发环境下默认生成的 Source Map，记录的是生成后的代码的位置。会导致运行时报错的行数与源代码的行 数不一致的问题。"),a("br")]),s._v(" "),a("p",[s._v("3.2 解决默认 Source Map 的问题"),a("br")]),s._v(" "),a("p",[s._v("开发环境下，推荐在 webpack.config.js 中添加如下的配置，即可保证运行时报错的行数与源代码的行数 保持一致："),a("br")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("export "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' development '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// eval-source-map 仅限在“开发模式”下使用，不建议在“生产模式”下使用。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 次选项生成的 Source Map 能够保证“ 运行时报错的行数 ” 与 “ 源代码的行数 ” 保持一致")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("devtool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' eval-source-map '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 省略其他配置项")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",[s._v("4. webpack 生产环境下的 Source Map")]),s._v(" "),a("p",[s._v("在生产环境下，如果省略了 devtool 选项，则最终生成的文件中不包含 Source Map。这能够防止原始代码通 过 Source Map 的形式暴露给别有所图之人。"),a("br")]),s._v(" "),a("p",[s._v("4.1 只定位行数不暴露源码"),a("br")]),s._v(" "),a("p",[s._v("在生产环境下，如果只想定位报错的具体行数，且不想暴露源码。此时可以将 devtool 的值设置为 nosources-source-map。"),a("br")]),s._v(" "),a("p",[s._v("4.2 定位行数且暴露源码"),a("br")]),s._v(" "),a("p",[s._v("在生产环境下，如果想在定位报错行数的同时，展示具体报错的源码。此时可以将 devtool 的值设置为 source-map。"),a("br")]),s._v(" "),a("p",[s._v("采用此选项后：你应该将你的服务器配置为，不允许普通用户访问 source map 文件！"),a("br")]),s._v(" "),a("h3",[s._v("5. Source Map 的最佳实践")]),s._v(" "),a("p",[s._v("① 开发环境下："),a("br")]),s._v(" "),a("p",[s._v("⚫ 建议把 devtool 的值设置为 eval-source-map"),a("br"),s._v("\n⚫ 好处：可以精准定位到具体的错误行"),a("br")]),s._v(" "),a("p",[s._v("② 生产环境下："),a("br")]),s._v(" "),a("p",[s._v("⚫ 建议关闭 Source Map 或将 devtool 的值设置为 nosources-source-map"),a("br"),s._v("\n⚫ 好处：防止源码泄露，提高网站的安全性"),a("br")]),s._v(" "),a("p",[a("em",[s._v("总结：")]),a("br")]),s._v(" "),a("p",[s._v("实际开发中需要自己配置 webpack 吗？"),a("br")]),s._v(" "),a("p",[s._v("答："),a("br")]),s._v(" "),a("p",[s._v("⚫ 实际开发中会使命令行工具（俗称 CLI）一键生成带有 webpack 的项目"),a("br"),s._v("\n⚫ 开箱即用，所有 webpack 配置项都是现成的！"),a("br"),s._v("\n⚫ 我们只需要知道 webpack 中的基本概念即可"),a("br")])])}),[],!1,null,null,null);t.default=r.exports}}]);